package com.gigaset.home;



import java.util.ArrayList;

import com.example.android.home.R;

import android.content.Context;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.drawable.Drawable;
import android.util.AttributeSet;
import android.view.View;

public class ScreenIconView extends View {
	private String label = new String();
	private int icon_active;
	private int icon_inactive;
	private int pages_cnt;
	private int default_active;
	private ArrayList<Drawable> pages;// = new ArrayList<Integer>();

	// ************** Constructors **************************
	
	public ScreenIconView(Context context) {
		super(context);
		pages = new ArrayList<Drawable>();
	}
	

	public ScreenIconView(Context context, AttributeSet attrs, int defStyle) {
		super(context, attrs, defStyle);
		pages = new ArrayList<Drawable>();
	}

	/**
	 * Constructor from XML layout
	 * @param context
	 * @param attrs
	 */
	public ScreenIconView(Context context, AttributeSet attrs) {
		super(context, attrs);

		TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.atrybutes);			// get array with attributes
		
		// Retrieve attributes from XML layout		
		label 			= (String) ta.getString(R.styleable.atrybutes_label);				// "" (none) by default
		icon_active 	= (int) ta.getFloat(R.styleable.atrybutes_icon_active, 		0);		// 0 - by default
		icon_inactive	= (int) ta.getFloat(R.styleable.atrybutes_icon_inactive, 	0);		// 0 - by default
		pages_cnt		= (int) ta.getFloat(R.styleable.atrybutes_pages_cnt,		0);		// 0 - by default
		default_active  = (int) ta.getFloat(R.styleable.atrybutes_default_active, 	0);		// 0 - by default
		

		setActivePage(default_active);
		
	}
	
	/**
	 * Set active page
	 * @param pageNbr - page number
	 */
	public void setActivePage(int pageNbr)
	{				
		if((pageNbr > pages_cnt) || (pageNbr < 1))
		{
			throw new ArrayIndexOutOfBoundsException("setActivePage: invalid page number");
		}
		
		this.pages = new ArrayList<Drawable>(this.pages_cnt);
		
		for(int i = 1; i <= this.pages_cnt; i++)
		{
			if(pageNbr == i)
			{
				this.pages.add(getResources().getDrawable(this.icon_active));
			}
			else
			{
				this.pages.add(getResources().getDrawable(this.icon_inactive));
			}
		}
	}
	

	@Override
	protected void onDraw(Canvas canvas) {
		super.onDraw(canvas);
	}
}
